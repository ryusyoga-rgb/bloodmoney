<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Play Blood Money Game Online Free - No download needed! Experience the thrilling human expenditure program featuring Harvey and Eun-mi. Complete challenges, make moral choices, and compete in the ultimate blood money game adventure. Play the full online version now!">
    <meta name="keywords" content="blood money game, harvey, eun-mi, human expenditure program, lovemoney game, bloodmoney, online game, no download needed, online version, free online game">
    <meta name="author" content="Blood Money Game">
    <meta property="og:title" content="Blood Money Game Online - No Download Needed | Harvey & Eun-mi Adventure">
    <meta property="og:description" content="Play Blood Money Game online free - No download needed! Experience the ultimate human expenditure program with Harvey and Eun-mi. Navigate moral choices and make life-changing decisions in this thrilling online version adventure.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com">
    <title>Blood Money Game Online - No Download Needed | Harvey & Eun-mi Human Expenditure Program</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        :root {
            --cute-pink: #FFB6C1;
            --cute-purple: #DDA0DD;
            --cute-blue: #87CEEB;
            --cute-yellow: #F0E68C;
            --cute-green: #98FB98;
            --cute-bg: #FFF0F5;
            --card-bg: rgba(255, 255, 255, 0.9);
            --border-color: rgba(255, 182, 193, 0.5);
            --text-dark: #4A4A4A;
            --text-light: #6B6B6B;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(180deg, var(--cute-bg) 0%, #FFE4E1 100%);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .hero-section {
            background: linear-gradient(rgba(255,255,255,0.9), rgba(255,182,193,0.8)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400"><defs><pattern id="hearts" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse"><rect fill="%23FFB6C1" width="40" height="40"/><text fill="%23FF69B4" font-size="20" font-family="Arial" x="20" y="25" text-anchor="middle">â™¥</text></pattern></defs><rect fill="url(%23hearts)" width="1200" height="400"/><text fill="%23FF1493" font-size="72" font-family="Comic Sans MS" font-weight="bold" x="600" y="200" text-anchor="middle">ğŸ’• Blood Money Game ğŸ’•</text><text fill="%23937DB" font-size="48" font-family="Comic Sans MS" x="600" y="250" text-anchor="middle">Play with Harvey & Eun-mi!</text></svg>');
            background-size: cover;
            background-position: center;
            padding: 60px 0;
            text-align: center;
            border-bottom: 3px solid var(--cute-pink);
        }

        .game-container {
            background: var(--card-bg);
            border: 2px solid var(--cute-pink);
            border-radius: 20px;
            padding: 0;
            margin: 0;
            box-shadow: 0 0 30px rgba(255, 182, 193, 0.5);
        }

        .game-iframe {
            width: 100%;
            height: 100vh;
            border: none;
            display: block;
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .game-iframe {
                height: 70vh;
            }
            
            .hero-section {
                padding: 30px 0;
            }
            
            .feature-card, .meme-generator, .comment-section {
                margin: 10px 0;
                padding: 20px;
            }
            
            .btn-custom {
                padding: 12px 25px;
                font-size: 1em;
            }
            
            .meme-canvas {
                width: 100%;
                max-width: 350px;
                height: 300px;
                border: 3px solid var(--cute-blue);
                border-radius: 15px;
                touch-action: none; /* Prevents browser default touch actions */
            }
            
            .voting-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .ending-btn {
                width: 100%;
                padding: 15px 20px;
            }
            
            .navbar-nav {
                flex-direction: column;
                gap: 10px;
            }
            
            /* Mobile text input fixes */
            .form-control, .form-select {
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Mobile-friendly buttons */
            .btn-custom {
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Mobile Canvas Container */
            .meme-generator-mobile {
                padding: 10px;
            }
            
            .mobile-controls {
                margin-top: 20px;
            }
            
            /* Better touch targets */
            .btn-custom {
                min-height: 44px; /* Apple's recommended minimum touch target size */
            }
            
            .form-control {
                min-height: 44px;
                padding: 12px;
            }
        }

        .feature-card {
            background: var(--card-bg);
            border: 3px solid var(--cute-pink);
            border-radius: 25px;
            padding: 30px;
            margin: 20px 0;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 182, 193, 0.3);
        }

        .feature-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--cute-purple);
            box-shadow: 0 12px 35px rgba(221, 160, 221, 0.5);
        }

        .btn-custom {
            background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple));
            color: white;
            border: 3px solid var(--cute-blue);
            padding: 15px 35px;
            border-radius: 25px;
            font-weight: bold;
            font-family: 'Comic Sans MS', cursive;
            text-transform: none;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 1.1em;
        }

        .btn-custom:hover {
            background: linear-gradient(45deg, var(--cute-purple), var(--cute-blue));
            border-color: var(--cute-yellow);
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(221, 160, 221, 0.4);
        }

        .leaderboard-table {
            background: rgba(255,255,255,0.8);
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid var(--cute-pink);
        }

        .meme-generator {
            background: rgba(255,255,255,0.9);
            border-radius: 25px;
            padding: 30px;
            margin: 20px 0;
            border: 3px solid var(--cute-purple);
        }

        .meme-canvas {
            border: 3px solid var(--cute-blue);
            border-radius: 15px;
            max-width: 100%;
            background: white;
            touch-action: none;
            cursor: default;
        }

        .voting-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .ending-btn {
            padding: 20px 40px;
            border: 3px solid white;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Comic Sans MS', cursive;
            font-size: 1.1em;
        }

        .ending-good { background: linear-gradient(45deg, var(--cute-green), var(--cute-blue)); color: white; border-color: var(--cute-green); }
        .ending-normal { background: linear-gradient(45deg, var(--cute-yellow), var(--cute-purple)); color: white; border-color: var(--cute-yellow); }
        .ending-bad { background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple)); color: white; border-color: var(--cute-pink); }

        .social-share {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .social-btn {
            padding: 10px 20px;
            border: 2px solid var(--money-bronze);
            border-radius: 0;
            color: var(--money-gold);
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .social-btn:hover {
            transform: translateY(-2px);
            color: white;
        }

        .twitter { background: #1da1f2; }
        .reddit { background: #ff4500; }
        .tiktok { background: #000000; }
        .discord { background: #5865f2; }

        .comment-section {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 30px;
            margin: 20px 0;
            border: 3px solid var(--cute-blue);
            box-shadow: 0 8px 25px rgba(135, 206, 235, 0.3);
        }

        .achievement-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,182,193,0.9);
            z-index: 1000;
        }

        .achievement-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            color: var(--text-dark);
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 3px solid var(--cute-pink);
            box-shadow: 0 8px 30px rgba(255,182,193,0.5);
        }

        .achievement-image {
            width: 100%;
            max-width: 400px;
            height: 300px;
            background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple));
            border-radius: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: bold;
            font-family: 'Comic Sans MS', cursive;
            box-shadow: 0 4px 15px rgba(221, 160, 221, 0.3);
        }

        h1, h2, h3 {
            color: var(--cute-purple);
            font-weight: bold;
            font-family: 'Comic Sans MS', cursive;
            text-transform: none;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .keyword-density {
            color: var(--cute-pink);
            font-weight: bold;
            font-size: 1.1em;
        }

        .image-option .placeholder-img:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .meme-canvas {
            cursor: default;
            transition: transform 0.15s ease;
            touch-action: none;
        }

        .meme-canvas:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .meme-thumbnail {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 15px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .meme-thumbnail:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg" style="background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple)); border-bottom: 3px solid var(--cute-blue);">
        <div class="container">
            <div class="d-flex align-items-center justify-content-between w-100">
                <!-- Game Title -->
                <div style="color: white; font-family: 'Comic Sans MS', cursive; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                    <div style="font-size: 1.2em;">ğŸ® Play Blood Money Game Online</div>
                    <div style="font-size: 0.9em; color: var(--cute-yellow);">ğŸ’• Free Online Version - No Download Needed!</div>
                </div>
                
                <!-- Navigation Links -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav d-flex flex-row gap-3">
                        <li class="nav-item">
                            <a class="nav-link" href="#harvey-memes" style="color: white; font-family: 'Comic Sans MS', cursive; font-weight: bold;">ğŸ­ Harvey Memes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#player-leaderboard" style="color: white; font-family: 'Comic Sans MS', cursive; font-weight: bold;">ğŸ† Leaderboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#comment-section" style="color: white; font-family: 'Comic Sans MS', cursive; font-weight: bold;">ğŸ’¬ Discussion</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Game Section -->
    <section id="game" class="py-0" style="height: 100vh; overflow: hidden;">
        <div class="container-fluid">
            <div class="game-container">
                <div style="position: relative;">
                    <iframe src="https://bloodmoneygame.io/game/bloodmoney/" class="game-iframe" title="Blood Money Game" id="gameFrame"></iframe>
                    <!-- Mobile-friendly game controls -->
                    <div style="position: absolute; bottom: 20px; right: 20px; z-index: 10; display: flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end;">
                        <!-- Fullscreen button -->
                        <button onclick="toggleFullscreen()" class="btn btn-custom btn-sm" style="background: rgba(255,255,255,0.9); color: var(--cute-purple); border: 2px solid var(--cute-pink); border-radius: 25px; padding: 8px 15px; font-size: 0.9em; min-width: 80px;" title="Toggle Fullscreen">
                            ğŸ”³ Full
                        </button>
                        <!-- Share button -->
                        <div class="dropdown">
                            <button class="btn btn-custom btn-sm" type="button" data-bs-toggle="dropdown" style="background: rgba(255,255,255,0.9); color: var(--cute-purple); border: 2px solid var(--cute-pink); border-radius: 25px; padding: 8px 15px; font-size: 0.9em; min-width: 80px;">
                                ğŸŒŸ Share
                            </button>
                            <ul class="dropdown-menu" style="background: white; border: 3px solid var(--cute-pink);">
                                <li><a class="dropdown-item" href="#" onclick="shareToTwitter()" style="color: var(--cute-purple);">ğŸ¦ Twitter/X</a></li>
                                <li><a class="dropdown-item" href="#" onclick="shareToReddit()" style="color: var(--cute-purple);">ğŸ‘¨â€ğŸ’¼ Reddit</a></li>
                                <li><a class="dropdown-item" href="#" onclick="shareToTikTok()" style="color: var(--cute-purple);">ğŸµ TikTok</a></li>
                                <li><a class="dropdown-item" href="#" onclick="shareToDiscord()" style="color: var(--cute-purple);">ğŸ’ Discord</a></li>
                                <li><hr class="dropdown-divider" style="border-color: var(--cute-pink);"></li>
                                <li><a class="dropdown-item" href="#" onclick="copyLink()" style="color: var(--cute-purple);">ğŸ“‹ Copy Link</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ending Voting Section -->
    <section class="py-3" style="background: var(--cute-bg); border-top: 3px solid var(--cute-pink);">
        <div class="container">
            <div class="feature-card text-center">
                <h3>ğŸŒŸ Which Ending Did You Get? Vote Now! ğŸŒŸ</h3>
                <p class="mb-4" style="color: var(--cute-purple); font-size: 1.2rem;">ğŸ¯ Complete the blood money game above, then vote for your ending!</p>
                <div class="voting-buttons">
                    <button class="ending-btn ending-good" onclick="voteEnding('good')">
                        ğŸ˜Š Good Ending
                    </button>
                    <button class="ending-btn ending-normal" onclick="voteEnding('normal')">
                        ğŸ˜ Normal Ending
                    </button>
                    <button class="ending-btn ending-bad" onclick="voteEnding('bad')">
                        ğŸ˜¢ Bad Ending
                    </button>
                </div>
                <div class="mt-4">
                    <h4>Current Results:</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="progress" style="height: 30px; border-radius: 15px;">
                                <div class="progress-bar" style="background: linear-gradient(45deg, var(--cute-green), var(--cute-blue)); width: 45%; border-radius: 15px;">45%</div>
                            </div>
                            <small style="color: var(--cute-green); font-weight: bold;">ğŸ˜Š Good Ending</small>
                        </div>
                        <div class="col-md-4">
                            <div class="progress" style="height: 30px; border-radius: 15px;">
                                <div class="progress-bar" style="background: linear-gradient(45deg, var(--cute-yellow), var(--cute-purple)); width: 35%; border-radius: 15px;">35%</div>
                            </div>
                            <small style="color: var(--cute-yellow); font-weight: bold;">ğŸ˜ Normal Ending</small>
                        </div>
                        <div class="col-md-4">
                            <div class="progress" style="height: 30px; border-radius: 15px;">
                                <div class="progress-bar" style="background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple)); width: 20%; border-radius: 15px;">20%</div>
                            </div>
                            <small style="color: var(--cute-pink); font-weight: bold;">ğŸ˜¢ Bad Ending</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Harvey Meme Generator -->
    <section id="harvey-memes" class="py-3" style="background: var(--cute-bg); border-top: 3px solid var(--cute-pink); margin-top: 20px;">
        <div class="container">
            <div class="meme-generator">
                <h3>ğŸ­ Harvey Meme Generator ğŸ­</h3>
                <p>Create your own Harvey memes from the blood money game!</p>
                
                <!-- Image Selection -->
                <div class="mb-4">
                    <h5>ğŸ“¸ Choose Your Image:</h5>
                    <div class="row">
                        <div class="col-md-4 col-6 mb-3">
                            <div class="image-option" onclick="selectMemeImage('harvey1')" id="img-harvey1">
                                <img src="image/harvey1.png" alt="Harvey 1" class="meme-thumbnail" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="placeholder-img" style="background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple)); height: 120px; border-radius: 15px; display: none; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer; border: 3px solid transparent;">
                                    ğŸ¤— Harvey 1
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-6 mb-3">
                            <div class="image-option" onclick="selectMemeImage('harvey2')" id="img-harvey2">
                                <img src="image/harvey2.png" alt="Harvey 2" class="meme-thumbnail" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="placeholder-img" style="background: linear-gradient(45deg, var(--cute-blue), var(--cute-green)); height: 120px; border-radius: 15px; display: none; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer; border: 3px solid transparent;">
                                    ğŸ˜ Harvey 2
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-6 mb-3">
                            <div class="image-option" onclick="selectMemeImage('harvey3')" id="img-harvey3">
                                <img src="image/harvey3.png" alt="Harvey 3" class="meme-thumbnail" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="placeholder-img" style="background: linear-gradient(45deg, var(--cute-yellow), var(--cute-purple)); height: 120px; border-radius: 15px; display: none; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer; border: 3px solid transparent;">
                                    ğŸ¥³ Harvey 3
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-6 mb-3">
                            <div class="image-option" onclick="selectMemeImage('harvey4')" id="img-harvey4">
                                <img src="image/harvey4.png" alt="Harvey 4" class="meme-thumbnail" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="placeholder-img" style="background: linear-gradient(45deg, var(--cute-green), var(--cute-blue)); height: 120px; border-radius: 15px; display: none; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer; border: 3px solid transparent;">
                                    ğŸ­ Harvey 4
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-6 mb-3">
                            <div class="image-option" onclick="selectMemeImage('harvey5')" id="img-harvey5">
                                <img src="image/harvey5.png" alt="Harvey 5" class="meme-thumbnail" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="placeholder-img" style="background: linear-gradient(45deg, var(--cute-purple), var(--cute-pink)); height: 120px; border-radius: 15px; display: none; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer; border: 3px solid transparent;">
                                    ğŸŒŸ Harvey 5
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-6 mb-3">
                            <div class="image-option" onclick="selectMemeImage('harvey6')" id="img-harvey6">
                                <img src="image/harvey6.png" alt="Harvey 6" class="meme-thumbnail" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div class="placeholder-img" style="background: linear-gradient(45deg, var(--cute-blue), var(--cute-yellow)); height: 120px; border-radius: 15px; display: none; align-items: center; justify-content: center; color: white; font-weight: bold; cursor: pointer; border: 3px solid transparent;">
                                    ğŸ¨ Harvey 6
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mobile-first Meme Generator Layout -->
                <div class="meme-generator-mobile">
                    <!-- Canvas Section -->
                    <div class="text-center mb-4">
                        <div style="position: relative; display: inline-block;">
                            <canvas id="memeCanvas" class="meme-canvas" width="400" height="400"></canvas>
                            <!-- Draggable text elements will be added here -->
                        </div>
                    </div>
                    
                    <!-- Mobile-friendly Controls -->
                    <div class="mobile-controls">
                        <!-- Add New Text Section -->
                        <div class="card mb-3" style="background: rgba(255,255,255,0.8); border: 2px solid var(--cute-purple);">
                            <div class="card-body">
                                <h6 class="card-title">â• Add Text</h6>
                                <div class="input-group">
                                    <textarea class="form-control" id="newMemeText" placeholder="Enter your text (supports multiline)" rows="2" style="font-size: 16px; resize: vertical;"></textarea>
                                    <button class="btn btn-custom" onclick="addNewText()">Add</button>
                                </div>
                                <small class="text-muted d-block mt-2">
                                    ğŸ’¡ <strong>Tips:</strong><br>
                                    â€¢ Desktop: Use mouse wheel to resize selected text<br>
                                    â€¢ Mobile: Use pinch gesture to resize text<br>
                                    â€¢ Click empty area to deselect text<br>
                                    â€¢ Ctrl+Enter to quickly add text
                                </small>
                            </div>
                        </div>
                        
                        <!-- Text Controls -->
                        <div class="card mb-3" style="background: rgba(255,255,255,0.8); border: 2px solid var(--cute-blue);">
                            <div class="card-body">
                                <h6 class="card-title">ğŸ¨ Text Settings</h6>
                                <div class="mb-3">
                                    <small>Selected: <span id="selectedTextInfo">Tap text to select</span></small>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="textSize" class="form-label">Size: <span id="sizeValue">24</span>px</label>
                                        <input type="range" class="form-range" id="textSize" min="12" max="48" value="24" oninput="updateSelectedText()">
                                    </div>
                                    <div class="col-6">
                                        <label for="textColor" class="form-label">Color:</label>
                                        <input type="color" class="form-control form-control-color" id="textColor" value="#ffffff" oninput="updateSelectedText()" style="height: 40px;">
                                    </div>
                                </div>
                                <div class="d-flex gap-2 mt-3">
                                    <button class="btn btn-outline-danger btn-sm flex-fill" onclick="deleteSelectedText()">ğŸ—‘ï¸ Delete</button>
                                    <button class="btn btn-outline-secondary btn-sm flex-fill" onclick="clearAllText()">ğŸ§¹ Clear All</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Background Controls -->
                        <div class="card mb-3" style="background: rgba(255,255,255,0.8); border: 2px solid var(--cute-green);">
                            <div class="card-body">
                                <h6 class="card-title">ğŸ–¼ï¸ Background</h6>
                                <div class="btn-group w-100" role="group">
                                    <input type="radio" class="btn-check" name="bgColor" id="bgNone" value="none" checked onchange="drawMemeBackground()">
                                    <label class="btn btn-outline-secondary" for="bgNone">ğŸŒˆ None</label>
                                    
                                    <input type="radio" class="btn-check" name="bgColor" id="bgWhite" value="white" onchange="drawMemeBackground()">
                                    <label class="btn btn-outline-light" for="bgWhite">âšª White</label>
                                    
                                    <input type="radio" class="btn-check" name="bgColor" id="bgBlack" value="black" onchange="drawMemeBackground()">
                                    <label class="btn btn-outline-dark" for="bgBlack">âš« Black</label>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-custom w-100 btn-lg" onclick="downloadMeme()">ğŸ’¾ Download Meme</button>
                        
                        <div class="mt-3 text-center">
                            <small class="text-muted">ğŸ’¡ How to use: 
                            â€¢ Add text with the input box above
                            â€¢ <strong>Tap text</strong> to select (pink outline)
                            â€¢ <strong>Touch & drag</strong> to move anywhere
                            â€¢ Use size/color controls to customize
                            </small>
                        </div>
                    </div>
                </div>
                
                <!-- Desktop Layout (hidden on mobile) -->
                <div class="d-none d-md-block">
                    <div class="row">
                        <div class="col-md-6">
                            <div style="position: relative;">
                                <canvas id="memeCanvasDesktop" class="meme-canvas" width="400" height="400" style="display: none;"></canvas>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!-- Desktop controls would go here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Achievement Image Generator -->
    <section class="py-3">
        <div class="container">
            <div class="feature-card">
                <h3>ğŸ† Achievement Share Generator ğŸ†</h3>
                <p>Enter your Blood Money game stats to generate a personalized achievement!</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="gameTime" class="form-label">â±ï¸ Completion Time (minutes):</label>
                            <input type="number" class="form-control" id="gameTime" placeholder="e.g., 15" min="1" max="120" value="15">
                        </div>
                        <div class="mb-3">
                            <label for="gameMoney" class="form-label">ğŸ’° Money Earned ($):</label>
                            <input type="number" class="form-control" id="gameMoney" placeholder="e.g., 45000" min="0" max="100000" value="45000">
                        </div>
                        <div class="mb-3">
                            <label for="gameChoice" class="form-label">ğŸ¯ Your Final Choice:</label>
                            <select class="form-select" id="gameChoice">
                                <option value="good">ğŸ˜Š Good Ending</option>
                                <option value="normal">ğŸ˜ Normal Ending</option>
                                <option value="bad">ğŸ˜¢ Bad Ending</option>
                            </select>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-custom" onclick="generateAchievement()">
                                ğŸŒŸ Generate My Achievement! ğŸŒŸ
                            </button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="text-center">
                            <h5>ğŸ† Achievement Tiers ğŸ†</h5>
                            <div class="row text-start">
                                <div class="col-12 mb-2">
                                    <span class="badge bg-success">ğŸš€ Speed Runner Millionaire</span><br>
                                    <small>Complete in â‰¤12 minutes with â‰¥$45,000</small>
                                </div>
                                <div class="col-12 mb-2">
                                    <span class="badge bg-primary">ğŸ¦„ Moral Hero</span><br>
                                    <small>Good ending with â‰¥$30,000</small>
                                </div>
                                <div class="col-12 mb-2">
                                    <span class="badge bg-warning">ğŸ’° Money Master</span><br>
                                    <small>Earn â‰¥$40,000</small>
                                </div>
                                <div class="col-12 mb-2">
                                    <span class="badge bg-info">ğŸ® Blood Money Player</span><br>
                                    <small>All other brave players!</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Player Leaderboard -->
    <section id="player-leaderboard" class="py-3">
        <div class="container">
            <div class="feature-card">
                <h3>ğŸ† Blood Money Game Leaderboard ğŸ†</h3>
                <p>Submit your score to compete with other players!</p>
                
                <!-- Score Submission Form -->
                <div class="row mb-4">
                    <div class="col-md-8">
                        <div class="card" style="background: rgba(255,255,255,0.8); border: 2px solid var(--cute-pink);">
                            <div class="card-body">
                                <h5 class="card-title">ğŸ® Submit Your Score</h5>
                                <div class="row">
                                    <div class="col-md-3">
                                        <input type="text" class="form-control" id="playerName" placeholder="Your Name" maxlength="15">
                                    </div>
                                    <div class="col-md-2">
                                        <input type="number" class="form-control" id="playerTime" placeholder="Time (min)" min="1" max="120">
                                    </div>
                                    <div class="col-md-3">
                                        <input type="number" class="form-control" id="playerMoney" placeholder="Money ($)" min="0" max="100000">
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select" id="playerEnding">
                                            <option value="">Ending</option>
                                            <option value="good">ğŸ˜Š Good</option>
                                            <option value="normal">ğŸ˜ Normal</option>
                                            <option value="bad">ğŸ˜¢ Bad</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-custom w-100" onclick="submitScore()">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card" style="background: rgba(255,255,255,0.8); border: 2px solid var(--cute-blue);">
                            <div class="card-body text-center">
                                <h5 class="card-title">ğŸ“Š Ranking Rules</h5>
                                <small>
                                    1. Fastest time first<br>
                                    2. Higher money breaks ties<br>
                                    3. Good ending bonus
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="leaderboard-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Time</th>
                                <th>Money</th>
                                <th>Ending</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body">
                            <!-- Default scores will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

  
    <!-- Comment Section -->
    <section id="comment-section" class="py-3">
        <div class="container">
            <div class="comment-section">
                <h3>ğŸ’¬ Blood Money Game Discussion ğŸ’¬</h3>
                <p>Share your thoughts, strategies, and experiences with the community!</p>
                
                <div class="mb-4">
                    <h4>Leave a Comment</h4>
                    <div class="mb-3">
                        <input type="text" class="form-control" placeholder="Your Name" id="commentName">
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" rows="3" placeholder="Share your blood money game experience..." id="commentText"></textarea>
                    </div>
                    <button class="btn btn-custom" onclick="postComment()">ğŸ“ Post Comment</button>
                </div>

                <div id="comments-section">
                    <h4>Recent Comments</h4>
                    <div class="border-bottom pb-3 mb-3">
                        <div class="d-flex justify-content-between">
                            <strong>GameMaster2024</strong>
                            <small class="text-muted">2 hours ago</small>
                        </div>
                        <p>This blood money game is amazing! The moral choices really make you think.</p>
                    </div>
                    <div class="border-bottom pb-3 mb-3">
                        <div class="d-flex justify-content-between">
                            <strong>StrategyQueen</strong>
                            <small class="text-muted">5 hours ago</small>
                        </div>
                        <p>Harvey's storyline in the human expenditure program is so compelling. Great game design!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SEO Article Section -->
    <section class="py-3">
        <div class="container">
            <div class="feature-card">
                <h2>ğŸ¤” What is Blood Money Game? Complete Guide to the Human Expenditure Program ğŸ¤”</h2>
                
                <h3>ğŸ’• Blood Money Game: Play with Harvey & Eun-mi in the Cutest Game Ever! ğŸ’•</h3>
                <p>Welcome to the ultimate <span class="keyword-density">blood money game</span> experience! This amazing <span class="keyword-density">blood money game</span> allows you to <span class="keyword-density">play online free</span> with <span class="keyword-density">no download needed</span>. Get ready to embark on an incredible journey with Harvey & Eun-mi in the cutest game adventure ever created!</p>
                
                <h3>Understanding the Blood Money Game Concept</h3>
                <p>The <span class="keyword-density">blood money game</span> represents a unique gaming experience that challenges players to navigate complex moral and financial decisions. At its core, this <span class="keyword-density">blood money game</span> introduces players to the mysterious <span class="keyword-density">human expenditure program</span>, where every choice carries significant weight and consequences.</p>

                <h3>Meet Harvey and Eun-mi: Key Characters</h3>
                <p>Central to the <span class="keyword-density">blood money game</span> experience are two compelling characters: <span class="keyword-density">Harvey</span> and <span class="keyword-density">Eun-mi</span>. These characters guide players through the intricate narrative of the <span class="keyword-density">human expenditure program</span>, offering different perspectives and challenges that shape the overall <span class="keyword-density">blood money game</span> journey.</p>

                <h3>How to Play Blood Money Game Effectively</h3>
                <p>Learning <strong>how to play the blood money game</strong> requires understanding several key mechanics. Players must balance risk versus reward while participating in various challenges within the <span class="keyword-density">human expenditure program</span>. The <span class="keyword-density">blood money game</span> rewards strategic thinking and moral consideration, making each playthrough unique.</p>

                <h3>Strategies for Success in Blood Money Game</h3>
                <p>Successful <span class="keyword-density">blood money game</span> players develop specific strategies to maximize their earnings while maintaining their moral compass. The <span class="keyword-density">lovemoney game</span> mechanics within the larger <span class="keyword-density">blood money game</span> framework require careful planning and decision-making skills.</p>

                <h3>The Multiple Endings System</h3>
                <p>One of the most compelling aspects of the <span class="keyword-density">blood money game</span> is its multiple ending system. Based on player choices throughout the <span class="keyword-density">human expenditure program</span>, participants can achieve different outcomes: good ending, normal ending, or bad ending. This replayability factor makes the <span class="keyword-density">blood money game</span> incredibly engaging.</p>

                <h3>Community and Competitive Features</h3>
                <p>The <span class="keyword-density">blood money game</span> community thrives on competition and collaboration. Players can share their achievements, compare completion times, and discuss strategies for navigating the complex <span class="keyword-density">human expenditure program</span>. This social aspect enhances the overall <span class="keyword-density">blood money game</span> experience.</p>

                <h3>Why Blood Money Game Stands Out</h3>
                <p>What sets the <span class="keyword-density">blood money game</span> apart from other games is its unique blend of moral storytelling and strategic gameplay. The <span class="keyword-density">blood money game</span> doesn't just entertainâ€”it challenges players to think critically about their decisions and their impact within the <span class="keyword-density">human expenditure program</span> context.</p>

                <p>Whether you're a casual player or a dedicated gamer, the <span class="keyword-density">blood money game</span> offers something for everyone. With its compelling narrative featuring <span class="keyword-density">Harvey</span> and <span class="keyword-density">Eun-mi</span>, strategic depth, and multiple paths to victory, the <span class="keyword-density">blood money game</span> represents the pinnacle of interactive storytelling in modern gaming.</p>
            </div>
        </div>
    </section>

    <!-- Achievement Modal -->
    <div id="achievementModal" class="achievement-modal">
        <div class="achievement-content">
            <h3>ğŸ‰ Achievement Unlocked! ğŸ‰</h3>
            <div class="achievement-image" id="achievementImage">
                <div>
                    <div id="achievementEmoji" style="font-size: 60px;">ğŸ†</div>
                    <div id="achievementText">Blood Money Master</div>
                    <div id="achievementStats">Time: 15:30 | Money: $45,000 | Choice: Moral</div>
                </div>
            </div>
            <div class="mb-3">
                <button class="btn btn-custom" onclick="shareAchievement()">ğŸŒŸ Share Achievement</button>
                <button class="btn btn-outline-secondary" onclick="closeAchievement()" style="background: var(--cute-blue); color: white; border: 2px solid var(--cute-purple); border-radius: 20px; padding: 12px 25px; font-family: 'Comic Sans MS', cursive;">âœ¨ Close</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Fullscreen functionality
        function toggleFullscreen() {
            const gameFrame = document.getElementById('gameFrame');
            if (!document.fullscreenElement) {
                gameFrame.requestFullscreen().catch(err => {
                    console.log('Error attempting to enable fullscreen:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // Achievement Generator - Form Input
        function generateAchievement() {
            // Get user input from form fields
            const gameTime = document.getElementById('gameTime').value;
            const gameMoney = document.getElementById('gameMoney').value;
            const gameChoice = document.getElementById('gameChoice').value;
            
            // Validate inputs
            if (!gameTime || !gameMoney || !gameChoice) {
                alert("ğŸ’• Please fill in all fields to generate your achievement!");
                return;
            }
            
            if (parseInt(gameTime) <= 0 || parseInt(gameMoney) < 0) {
                alert("ğŸ’• Please enter valid positive numbers!");
                return;
            }
            
            // Determine achievement based on performance
            let achievement, emoji, color;
            const timeNum = parseInt(gameTime);
            const moneyNum = parseInt(gameMoney.replace(/[^0-9]/g, ''));
            
            if (timeNum <= 12 && moneyNum >= 45000) {
                achievement = "ğŸš€ Speed Runner Millionaire ğŸš€";
                emoji = "â­";
                color = "linear-gradient(45deg, var(--cute-green), var(--cute-yellow))";
            } else if (gameChoice === "good" && moneyNum >= 30000) {
                achievement = "ğŸ¦„ Moral Hero ğŸ¦„";
                emoji = "âš–ï¸";
                color = "linear-gradient(45deg, var(--cute-purple), var(--cute-blue))";
            } else if (moneyNum >= 40000) {
                achievement = "ğŸ’° Money Master ğŸ’°";
                emoji = "ğŸ’";
                color = "linear-gradient(45deg, var(--cute-yellow), var(--cute-pink))";
            } else {
                achievement = "ğŸ® Blood Money Player ğŸ®";
                emoji = "ğŸ®";
                color = "linear-gradient(45deg, var(--cute-pink), var(--cute-purple))";
            }
            
            // Format choice text
            const choiceText = {
                'good': 'ğŸ˜Š Moral',
                'normal': 'ğŸ˜ Neutral', 
                'bad': 'ğŸ˜¢ Ruthless'
            }[gameChoice] || gameChoice;
            
            // Format time
            const minutes = parseInt(gameTime) || 0;
            const seconds = Math.floor(Math.random() * 60); // Add random seconds for realism
            const timeText = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Format money
            const moneyText = `$${parseInt(moneyNum || 0).toLocaleString()}`;
            
            // Update achievement modal
            document.getElementById('achievementText').textContent = achievement;
            document.getElementById('achievementStats').textContent = `â±ï¸ Time: ${timeText} | ğŸ’° Money: ${moneyText} | ğŸ¯ Choice: ${choiceText}`;
            document.getElementById('achievementEmoji').textContent = emoji;
            document.getElementById('achievementImage').style.background = color;
            
            document.getElementById('achievementModal').style.display = 'block';
        }

        function closeAchievement() {
            document.getElementById('achievementModal').style.display = 'none';
        }

        function shareAchievement() {
            const text = document.getElementById('achievementText').textContent;
            const stats = document.getElementById('achievementStats').textContent;
            shareToSocial(`Just unlocked "${text}" in Blood Money Game! ${stats}`);
        }

        // Advanced Meme Generator with Multi-Text Support
        let selectedImage = 'harvey1';
        let canvas, ctx;
        let textElements = [];
        let isDragging = false;
        let dragElement = null;
        let dragOffset = { x: 0, y: 0 };
        let loadedImages = {};
        let selectedTextIndex = -1;
        
        // Pinch gesture variables for mobile text size control
        let isPinching = false;
        let initialPinchDistance = 0;
        let initialTextSize = 0;

        // Initialize canvas
        window.addEventListener('load', function() {
            canvas = document.getElementById('memeCanvas');
            ctx = canvas.getContext('2d');
            preloadImages();
            setTimeout(() => {
                selectMemeImage('harvey1');
            }, 1000);
            
            // Initialize vote display and leaderboard
            updateVoteDisplay();
            updateLeaderboard();
            
            // Add event listeners for drag and drop (desktop)
            canvas.addEventListener('mousedown', startDrag);
            canvas.addEventListener('mousemove', drag);
            canvas.addEventListener('mouseup', endDrag);
            canvas.addEventListener('mouseleave', endDrag);
            canvas.addEventListener('click', function(e) {
                // Reset selection if clicking outside any text element
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                let clickedOnText = false;
                for (let i = textElements.length - 1; i >= 0; i--) {
                    const element = textElements[i];
                    ctx.font = `bold ${element.size}px Comic Sans MS`;
                    
                    // Calculate text dimensions for multiline support
                    const lines = element.text.split('\n');
                    const lineHeight = element.size * 1.2;
                    const totalHeight = lines.length * lineHeight;
                    
                    let textWidth = 0;
                    lines.forEach(line => {
                        const lineWidth = ctx.measureText(line).width;
                        if (lineWidth > textWidth) {
                            textWidth = lineWidth;
                        }
                    });
                    
                    const padding = 15;
                    if (x >= element.x - textWidth/2 - padding && 
                        x <= element.x + textWidth/2 + padding &&
                        y >= element.y - element.size - padding && 
                        y <= element.y + totalHeight - element.size + padding) {
                        clickedOnText = true;
                        break;
                    }
                }
                
                // If clicked outside any text, deselect the current text
                if (!clickedOnText) {
                    selectedTextIndex = -1;
                    updateTextControls();
                    drawMemeBackground();
                }
            });
            
            // Add mouse wheel support for text size control (desktop)
            canvas.addEventListener('wheel', function(e) {
                if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {
                    e.preventDefault();
                    
                    const element = textElements[selectedTextIndex];
                    const delta = e.deltaY > 0 ? -2 : 2; // Scroll down = smaller, up = larger
                    
                    // Update text size with limits
                    element.size = Math.max(10, Math.min(100, element.size + delta));
                    
                    // Update UI controls
                    document.getElementById('textSize').value = element.size;
                    document.getElementById('sizeValue').textContent = element.size;
                    
                    // Redraw canvas
                    drawMemeBackground();
                }
            });
            
            // Add touch event listeners for mobile
            canvas.addEventListener('touchstart', handleTouchStart, {passive: false});
            canvas.addEventListener('touchmove', handleTouchMove, {passive: false});
            canvas.addEventListener('touchend', handleTouchEnd, {passive: false});
            
            // Add enter key support for text input
            document.getElementById('newMemeText').addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    addNewText();
                }
            });
            
            // Mobile touch optimization - prevent default scrolling
            document.body.addEventListener('touchstart', function(e) {
                if (e.target === canvas) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            document.body.addEventListener('touchmove', function(e) {
                if (e.target === canvas) {
                    e.preventDefault();
                }
            }, { passive: false });
        });

        function preloadImages() {
            const imageNames = ['harvey1', 'harvey2', 'harvey3', 'harvey4', 'harvey5', 'harvey6'];
            imageNames.forEach(name => {
                const img = new Image();
                img.onload = function() {
                    loadedImages[name] = img;
                    console.log(`Image ${name} loaded successfully`);
                };
                img.onerror = function() {
                    console.log(`Image ${name} not found, using placeholder`);
                    // Create a placeholder entry so we know this image failed to load
                    loadedImages[name] = null;
                };
                img.src = `image/${name}.png`;
            });
        }

        function selectMemeImage(imageId) {
            selectedImage = imageId;
            
            // Update UI to show selected image
            document.querySelectorAll('.image-option img, .image-option .placeholder-img').forEach(element => {
                element.style.border = '3px solid transparent';
                element.style.boxShadow = 'none';
            });
            
            const selectedElement = document.querySelector(`#img-${imageId} img, #img-${imageId} .placeholder-img`);
            if (selectedElement) {
                selectedElement.style.border = '3px solid var(--cute-purple)';
                selectedElement.style.boxShadow = '0 4px 15px rgba(221, 160, 221, 0.5)';
            }
            
            // Update canvas using preloaded images
            drawMemeBackground();
        }
        
        function updateMemePreview() {
            if (!canvas || !ctx) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Get selected background
            let selectedBg = 'none';
            try {
                const bgRadio = document.querySelector('input[name="bgColor"]:checked');
                if (bgRadio) {
                    selectedBg = bgRadio.value;
                }
            } catch (e) {
                selectedBg = 'none';
            }
            
            // Draw background if selected
            if (selectedBg === 'black') {
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            } else if (selectedBg === 'white') {
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            
            // Load and draw the selected image
            const img = new Image();
            img.onload = function() {
                const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
                const x = (canvas.width - img.width * scale) / 2;
                const y = (canvas.height - img.height * scale) / 2;
                ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
                
                // Redraw text elements if any
                if (textElements && textElements.length > 0) {
                    textElements.forEach((element, index) => drawTextElement(element, index));
                }
            };
            img.src = `image/${selectedImage}.png`;
        }

        function drawMemeBackground() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Try to get selected background, fall back to 'none' if not available
            let selectedBg = 'none';
            try {
                const bgRadio = document.querySelector('input[name="bgColor"]:checked');
                if (bgRadio) {
                    selectedBg = bgRadio.value;
                }
            } catch (e) {
                selectedBg = 'none';
            }
            
            // Draw background if selected
            if (selectedBg === 'black') {
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            } else if (selectedBg === 'white') {
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            
            // Try to draw the selected image
            if (loadedImages && loadedImages[selectedImage]) {
                try {
                    const img = loadedImages[selectedImage];
                    // Check if image is properly loaded
                    if (img.complete && img.naturalWidth > 0) {
                        const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
                        const x = (canvas.width - img.width * scale) / 2;
                        const y = (canvas.height - img.height * scale) / 2;
                        
                        // Draw image on top of background
                        ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
                    } else {
                        // Image not properly loaded, show placeholder
                        drawPlaceholder(selectedBg);
                    }
                } catch (e) {
                    // If image drawing fails, show placeholder
                    drawPlaceholder(selectedBg);
                }
            } else {
                // Show placeholder if no image loaded
                drawPlaceholder(selectedBg);
            }
            
            // Draw all text elements
            if (textElements && textElements.length > 0) {
                textElements.forEach((element, index) => drawTextElement(element, index));
            }
        }
        
        function drawPlaceholder(selectedBg) {
            // Draw gradient placeholder
            const gradients = {
                'harvey1': ['#FFB6C1', '#DDA0DD'],
                'harvey2': ['#87CEEB', '#98FB98'],
                'harvey3': ['#F0E68C', '#DDA0DD'],
                'harvey4': ['#98FB98', '#87CEEB'],
                'harvey5': ['#DDA0DD', '#FFB6C1'],
                'harvey6': ['#87CEEB', '#F0E68C']
            };
            
            if (selectedBg === 'none') {
                const colors = gradients[selectedImage];
                if (colors) {
                    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                    gradient.addColorStop(0, colors[0]);
                    gradient.addColorStop(1, colors[1]);
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }
            }
            
            // Draw placeholder text
            const characters = {
                'harvey1': 'ğŸ¤— HARVEY 1 ğŸ¤—',
                'harvey2': 'ğŸ˜ HARVEY 2 ğŸ˜',
                'harvey3': 'ğŸ¥³ HARVEY 3 ğŸ¥³',
                'harvey4': 'ğŸ­ HARVEY 4 ğŸ­',
                'harvey5': 'ğŸŒŸ HARVEY 5 ğŸŒŸ',
                'harvey6': 'ğŸ¨ HARVEY 6 ğŸ¨'
            };
            
            const isDarkBg = selectedBg === 'black';
            
            ctx.fillStyle = '#FF69B4';
            ctx.fillRect(50, 100, 300, 200);
            ctx.strokeStyle = isDarkBg ? '#FFF' : '#000';
            ctx.lineWidth = 3;
            ctx.strokeRect(50, 100, 300, 200);
            
            ctx.fillStyle = isDarkBg ? '#FFF' : '#000';
            ctx.font = 'bold 28px Comic Sans MS';
            ctx.textAlign = 'center';
            ctx.fillText(characters[selectedImage], 200, 200);
        }

        function drawTextElement(element, index) {
            ctx.font = `bold ${element.size}px Comic Sans MS`;
            ctx.fillStyle = element.color;
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.textAlign = 'center';
            
            // Split text into lines for multiline support
            const lines = element.text.split('\n');
            const lineHeight = element.size * 1.2;
            
            // Calculate total text dimensions for selection box
            let totalWidth = 0;
            let totalHeight = lines.length * lineHeight;
            
            // Find the widest line
            lines.forEach(line => {
                const lineWidth = ctx.measureText(line).width;
                if (lineWidth > totalWidth) {
                    totalWidth = lineWidth;
                }
            });
            
            // Draw selection indicator if this text is selected
            if (index === selectedTextIndex) {
                // Draw selection box
                ctx.strokeStyle = '#FF69B4';
                ctx.lineWidth = 3;
                ctx.setLineDash([5, 5]);
                ctx.strokeRect(
                    element.x - totalWidth/2 - 5,
                    element.y - element.size - 5,
                    totalWidth + 10,
                    totalHeight + 10
                );
                ctx.setLineDash([]);
            }
            
            // Draw each line of text
            lines.forEach((line, lineIndex) => {
                const yOffset = element.y + (lineIndex * lineHeight);
                ctx.strokeText(line, element.x, yOffset);
                ctx.fillText(line, element.x, yOffset);
            });
        }

        // Multi-Text Functions
        function addNewText() {
            const text = document.getElementById('newMemeText').value.trim();
            if (!text) {
                alert('ğŸ’• Please enter some text first!');
                return;
            }
            
            // Create new text element with random position
            const newText = {
                text: text,
                x: Math.random() * 200 + 100, // Random position
                y: Math.random() * 200 + 100,
                size: 24,
                color: '#ffffff'
            };
            
            textElements.push(newText);
            selectedTextIndex = textElements.length - 1;
            
            // Clear input and update UI
            document.getElementById('newMemeText').value = '';
            updateTextControls();
            drawMemeBackground();
        }

        function updateTextControls() {
            if (selectedTextIndex >= 0 && selectedTextIndex < textElements.length) {
                const text = textElements[selectedTextIndex];
                document.getElementById('selectedTextInfo').textContent = `"${text.text}"`;
                document.getElementById('textSize').value = text.size;
                document.getElementById('textColor').value = text.color;
                document.getElementById('sizeValue').textContent = text.size;
            } else {
                document.getElementById('selectedTextInfo').textContent = 'Click on text to select';
            }
        }

        function updateSelectedText() {
            if (selectedTextIndex < 0 || selectedTextIndex >= textElements.length) return;
            
            const size = parseInt(document.getElementById('textSize').value);
            const color = document.getElementById('textColor').value;
            
            textElements[selectedTextIndex].size = size;
            textElements[selectedTextIndex].color = color;
            
            document.getElementById('sizeValue').textContent = size;
            
            // Ensure the selected text remains draggable after modification
            const currentElement = textElements[selectedTextIndex];
            if (dragElement === currentElement) {
                // If this element was being dragged, maintain the drag state
                dragElement = currentElement;
            }
            
            drawMemeBackground();
        }

        function deleteSelectedText() {
            if (selectedTextIndex < 0 || selectedTextIndex >= textElements.length) {
                alert('ğŸ’• Please select a text first!');
                return;
            }
            
            textElements.splice(selectedTextIndex, 1);
            selectedTextIndex = -1;
            updateTextControls();
            drawMemeBackground();
        }

        function clearAllText() {
            if (textElements.length === 0) return;
            
            if (confirm('ğŸ’• Are you sure you want to clear all text?')) {
                textElements = [];
                selectedTextIndex = -1;
                updateTextControls();
                drawMemeBackground();
            }
        }

        function clearCanvas() {
            clearAllText();
        }

        function startDrag(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Check if clicking on a text element (reverse order to get top element)
            for (let i = textElements.length - 1; i >= 0; i--) {
                const element = textElements[i];
                ctx.font = `bold ${element.size}px Comic Sans MS`;
                const textWidth = ctx.measureText(element.text).width;
                const textHeight = element.size;
                
                // Add some padding for easier clicking, similar to touch handling
                const padding = 15;
                
                // Calculate text dimensions for multiline support
                const lines = element.text.split('\n');
                const lineHeight = element.size * 1.2;
                const totalHeight = lines.length * lineHeight;
                
                let textWidth = 0;
                lines.forEach(line => {
                    const lineWidth = ctx.measureText(line).width;
                    if (lineWidth > textWidth) {
                        textWidth = lineWidth;
                    }
                });
                
                const leftBound = element.x - textWidth/2 - padding;
                const rightBound = element.x + textWidth/2 + padding;
                const topBound = element.y - element.size - padding;
                const bottomBound = element.y + totalHeight - element.size + padding;
                
                if (x >= leftBound && x <= rightBound &&
                    y >= topBound && y <= bottomBound) {
                    
                    // Select this text element
                    selectedTextIndex = i;
                    updateTextControls();
                    
                    isDragging = true;
                    dragElement = element;
                    dragOffset.x = x - element.x;
                    dragOffset.y = y - element.y;
                    canvas.style.cursor = 'grabbing';
                    
                    // Visual feedback
                    canvas.style.transform = 'scale(1.01)';
                    
                    drawMemeBackground(); // Redraw to show selection
                    break;
                }
            }
        }

        function drag(e) {
            if (!isDragging || !dragElement) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            dragElement.x = x - dragOffset.x;
            dragElement.y = y - dragOffset.y;
            
            // Keep text within canvas bounds
            dragElement.x = Math.max(20, Math.min(canvas.width - 20, dragElement.x));
            dragElement.y = Math.max(20, Math.min(canvas.height - 10, dragElement.y));
            
            drawMemeBackground();
        }

        function endDrag() {
            isDragging = false;
            dragElement = null;
            canvas.style.cursor = 'default';
            
            // Reset visual feedback
            canvas.style.transform = 'scale(1)';
        }

        // Touch event handlers for mobile - simplified and more reliable
        function handleTouchStart(e) {
            e.preventDefault();
            
            // Handle pinch gesture for text size control
            if (e.touches.length === 2 && selectedTextIndex >= 0) {
                isPinching = true;
                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                initialPinchDistance = Math.hypot(
                    touch2.clientX - touch1.clientX,
                    touch2.clientY - touch1.clientY
                );
                initialTextSize = textElements[selectedTextIndex].size;
                return;
            }
            
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            // Check if touching on any text element - increased sensitivity
            for (let i = textElements.length - 1; i >= 0; i--) {
                const element = textElements[i];
                ctx.font = `bold ${element.size}px Comic Sans MS`;
                
                // Calculate text dimensions for multiline support
                const lines = element.text.split('\n');
                const lineHeight = element.size * 1.2;
                const totalHeight = lines.length * lineHeight;
                
                let textWidth = 0;
                lines.forEach(line => {
                    const lineWidth = ctx.measureText(line).width;
                    if (lineWidth > textWidth) {
                        textWidth = lineWidth;
                    }
                });
                
                // Increased padding for much easier touch detection
                const padding = Math.max(60, element.size / 1.2);
                
                // Expanded touch area - make it much easier to grab text
                const touchAreaLeft = element.x - textWidth/2 - padding;
                const touchAreaRight = element.x + textWidth/2 + padding;
                const touchAreaTop = element.y - element.size - padding;
                const touchAreaBottom = element.y + totalHeight - element.size + padding;
                
                if (x >= touchAreaLeft && 
                    x <= touchAreaRight &&
                    y >= touchAreaTop && 
                    y <= touchAreaBottom) {
                    
                    // Select this text element
                    selectedTextIndex = i;
                    updateTextControls();
                    
                    isDragging = true;
                    dragElement = element;
                    
                    // Calculate offset from touch point to text center for more intuitive dragging
                    dragOffset.x = x - element.x;
                    dragOffset.y = y - element.y;
                    
                    // Visual feedback - add slight scale effect
                    canvas.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        canvas.style.transform = 'scale(1)';
                    }, 150);
                    
                    // Redraw to show selection
                    drawMemeBackground();
                    break;
                }
            }
        }

        function handleTouchMove(e) {
            e.preventDefault();
            
            // Handle pinch gesture for text size control
            if (e.touches.length === 2 && isPinching && selectedTextIndex >= 0) {
                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                const currentDistance = Math.hypot(
                    touch2.clientX - touch1.clientX,
                    touch2.clientY - touch1.clientY
                );
                
                const scale = currentDistance / initialPinchDistance;
                const newSize = Math.max(10, Math.min(100, initialTextSize * scale));
                
                textElements[selectedTextIndex].size = newSize;
                
                // Update UI controls
                document.getElementById('textSize').value = newSize;
                document.getElementById('sizeValue').textContent = newSize;
                
                drawMemeBackground();
                return;
            }
            
            if (!isDragging || !dragElement) return;
            
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            // Update text position based on touch - more responsive movement
            dragElement.x = x - dragOffset.x;
            dragElement.y = y - dragOffset.y;
            
            // Keep text within canvas bounds with reduced margin for more movement freedom
            const margin = 15;
            dragElement.x = Math.max(margin, Math.min(canvas.width - margin, dragElement.x));
            dragElement.y = Math.max(margin, Math.min(canvas.height - margin, dragElement.y));
            
            // Immediate redraw without delay for better responsiveness
            requestAnimationFrame(() => {
                drawMemeBackground();
            });
        }

        function handleTouchEnd(e) {
            if (isPinching) {
                isPinching = false;
                initialPinchDistance = 0;
                initialTextSize = 0;
            }
            
            if (isDragging) {
                isDragging = false;
                dragElement = null;
                
                // Visual feedback - return to normal scale
                canvas.style.transform = 'scale(1)';
                
                // Final redraw to clean up any visual artifacts
                setTimeout(() => {
                    drawMemeBackground();
                }, 50);
            }
            e.preventDefault();
        }

        function clearCanvas() {
            textElements = [];
            drawMemeBackground();
        }

        function downloadMeme() {
            const canvas = document.getElementById('memeCanvas');
            const link = document.createElement('a');
            link.download = 'harvey-meme.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Social Sharing
        function shareToTwitter() {
            const text = "Just played Blood Money Game Online - No download needed! Experience the human expenditure program with Harvey and Eun-mi. #BloodMoneyGame #NoDownload #OnlineGame";
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        function copyLink() {
            const dummy = document.createElement('input');
            document.body.appendChild(dummy);
            dummy.value = window.location.href;
            dummy.select();
            document.execCommand('copy');
            document.body.removeChild(dummy);
            alert('ğŸŒŸ Link copied to clipboard! Yay! ğŸŒŸ');
        }

        function shareToReddit() {
            const title = "Blood Money Game - Amazing Experience!";
            const url = `https://reddit.com/submit?url=${encodeURIComponent(window.location.href)}&title=${encodeURIComponent(title)}`;
            window.open(url, '_blank');
        }

        function shareToTikTok() {
            alert('ğŸµ To share on TikTok, create a cute video of your gameplay and use hashtags: #BloodMoneyGame #Harvey #Eunmi #Gaming ğŸµ');
        }

        function shareToDiscord() {
            const text = "Check out this amazing Blood Money Game! ğŸ®âœ¨";
            if (navigator.share) {
                navigator.share({
                    title: 'Blood Money Game',
                    text: text,
                    url: window.location.href
                });
            } else {
                alert('Copy this link to share on Discord: ' + window.location.href);
            }
        }

        function shareToSocial(text) {
            if (navigator.share) {
                navigator.share({
                    title: 'Blood Money Game Achievement',
                    text: text,
                    url: window.location.href
                });
            } else {
                alert('Share this achievement: ' + text);
            }
        }

        // Ending Voting - Real-time calculation
        let voteData = {
            good: 10,
            normal: 10,
            bad: 10
        };

        function voteEnding(ending) {
            // Add vote to data
            voteData[ending]++;
            
            // Update UI with new percentages
            updateVoteDisplay();
            
            // Show confirmation
            alert(`ğŸŒŸ Thank you for voting for the ${ending} ending! Your vote has been recorded. You're awesome! ğŸŒŸ`);
        }

        function updateVoteDisplay() {
            const total = voteData.good + voteData.normal + voteData.bad;
            const goodPercent = Math.round((voteData.good / total) * 100);
            const normalPercent = Math.round((voteData.normal / total) * 100);
            const badPercent = Math.round((voteData.bad / total) * 100);

            // Find all progress containers and update the correct ones
            const progressContainers = document.querySelectorAll('.progress');
            
            // Good ending (first progress bar)
            if (progressContainers[0]) {
                const goodBar = progressContainers[0].querySelector('.progress-bar');
                if (goodBar) {
                    goodBar.style.width = goodPercent + '%';
                    goodBar.textContent = goodPercent + '%';
                }
            }
            
            // Normal ending (second progress bar)
            if (progressContainers[1]) {
                const normalBar = progressContainers[1].querySelector('.progress-bar');
                if (normalBar) {
                    normalBar.style.width = normalPercent + '%';
                    normalBar.textContent = normalPercent + '%';
                }
            }
            
            // Bad ending (third progress bar)
            if (progressContainers[2]) {
                const badBar = progressContainers[2].querySelector('.progress-bar');
                if (badBar) {
                    badBar.style.width = badPercent + '%';
                    badBar.textContent = badPercent + '%';
                }
            }
        }

        // Leaderboard System
        let leaderboardData = [
            { name: "SpeedDemon", time: 8, money: 48000, ending: "good" },
            { name: "ProGamer123", time: 12, money: 50000, ending: "good" },
            { name: "MoneyMaker", time: 15, money: 52000, ending: "normal" },
            { name: "QuickPlayer", time: 18, money: 35000, ending: "bad" },
            { name: "CasualGamer", time: 25, money: 30000, ending: "normal" }
        ];

        function calculateScore(player) {
            // Lower time = higher score, higher money = higher score
            const timeScore = (100 - player.time) * 1000;
            const moneyScore = player.money;
            const endingBonus = player.ending === 'good' ? 5000 : player.ending === 'normal' ? 2000 : 0;
            return timeScore + moneyScore + endingBonus;
        }

        function formatTime(minutes) {
            const secs = Math.floor(Math.random() * 60); // Add random seconds
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        function getEndingBadge(ending) {
            const badges = {
                'good': '<span class="badge" style="background: linear-gradient(45deg, var(--cute-green), var(--cute-blue));">ğŸ˜Š Good</span>',
                'normal': '<span class="badge" style="background: linear-gradient(45deg, var(--cute-yellow), var(--cute-purple));">ğŸ˜ Normal</span>',
                'bad': '<span class="badge" style="background: linear-gradient(45deg, var(--cute-pink), var(--cute-purple));">ğŸ˜¢ Bad</span>'
            };
            return badges[ending] || ending;
        }

        function getRankEmoji(index) {
            const emojis = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
            return emojis[index] || `${index + 1}`;
        }

        function updateLeaderboard() {
            // Sort by score (highest first)
            const sortedData = [...leaderboardData].sort((a, b) => calculateScore(b) - calculateScore(a));
            
            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';
            
            sortedData.forEach((player, index) => {
                const row = document.createElement('tr');
                const score = calculateScore(player);
                
                row.innerHTML = `
                    <td>${getRankEmoji(index)}</td>
                    <td>${player.name}</td>
                    <td>${formatTime(player.time)}</td>
                    <td>$${player.money.toLocaleString()}</td>
                    <td>${getEndingBadge(player.ending)}</td>
                    <td><small class="text-muted">${score.toLocaleString()}</small></td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function submitScore() {
            const name = document.getElementById('playerName').value.trim();
            const time = parseInt(document.getElementById('playerTime').value);
            const money = parseInt(document.getElementById('playerMoney').value);
            const ending = document.getElementById('playerEnding').value;
            
            // Validation
            if (!name || !time || !money || !ending) {
                alert('ğŸ’• Please fill in all fields!');
                return;
            }
            
            if (time <= 0 || money < 0) {
                alert('ğŸ’• Please enter valid positive numbers!');
                return;
            }
            
            // Check if player already exists and update, or add new
            const existingIndex = leaderboardData.findIndex(p => p.name.toLowerCase() === name.toLowerCase());
            
            const newScore = {
                name: name,
                time: time,
                money: money,
                ending: ending
            };
            
            if (existingIndex >= 0) {
                // Update existing player (only if new score is better)
                const oldScore = calculateScore(leaderboardData[existingIndex]);
                const newPlayerScore = calculateScore(newScore);
                
                if (newPlayerScore > oldScore) {
                    leaderboardData[existingIndex] = newScore;
                    alert(`ğŸ‰ New personal best for ${name}!`);
                } else {
                    alert(`ğŸ’ª Your existing score is still better!`);
                }
            } else {
                // Add new player
                leaderboardData.push(newScore);
                alert(`ğŸ‰ Welcome to the leaderboard, ${name}!`);
            }
            
            // Clear form
            document.getElementById('playerName').value = '';
            document.getElementById('playerTime').value = '';
            document.getElementById('playerMoney').value = '';
            document.getElementById('playerEnding').value = '';
            
            // Update display
            updateLeaderboard();
        }

        // Initialize vote display and leaderboard on page load
        // (This is now included in the main load event above)

        // Comment System
        function postComment() {
            const name = document.getElementById('commentName').value;
            const text = document.getElementById('commentText').value;
            
            if (!name || !text) {
                alert('ğŸ’• Please enter both name and comment. We want to hear from you! ğŸ’•');
                return;
            }
            
            const commentsSection = document.getElementById('comments-section');
            const newComment = document.createElement('div');
            newComment.className = 'border-bottom pb-3 mb-3';
            newComment.innerHTML = `
                <div class="d-flex justify-content-between">
                    <strong>${name}</strong>
                    <small class="text-muted">Just now</small>
                </div>
                <p>${text}</p>
            `;
            
            commentsSection.appendChild(newComment);
            
            // Clear form
            document.getElementById('commentName').value = '';
            document.getElementById('commentText').value = '';
            
            alert('ğŸŒŸ Comment posted successfully! Thank you for sharing! ğŸŒŸ');
        }

  
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('achievementModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        };
    </script>
</body>
</html>
